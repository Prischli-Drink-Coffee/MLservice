# ---TAG YOUR IMAGES---
APP_TAG=latest
MODE=dev

#---CONTAINERS CONFIG---

##POSTGRESQL CONTAINER CONFIG
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your-postgres-password-here
POSTGRES_DB=main
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

#NGINX
NGINX_PORT=80

#---API CONFIG---

##LOGGING
SERVICE_LOGGING_LEVEL=DEBUG

##API CONFIG
SERVICE_SERVER_PORT=8000
SERVICE_NAME=service-api

##API AUTH CONFIG
AUTH__SECRET=your-jwt-secret-key-here-change-in-production
AUTH__ALGORITHM=HS256
AUTH__EXP_HOURS=24
AUTH__DEV_MODE=True

# CORS (JSON-массив доменов; в продакшне лучше оставить пустым, если фронт и бэкенд на одном домене через Nginx)
CORS__ALLOW_ORIGINS=["http://localhost:3000"]

#REACT
REACT_APP_API_BASE_URL=http://81.177.217.148:8000
REACT_APP_ENABLE_ADMIN_UI=true
ADMIN_USER_IDS=00000000-0000-0000-0000-000000000000

##STORAGE CONFIG
STORAGE_ROOT=/var/lib/app/storage
STORAGE_BACKEND=local  # local|minio

# MinIO Configuration (if STORAGE_BACKEND=minio)
MINIO__ENDPOINT=minio:9000  # Use "localhost:9000" for local development
MINIO__ACCESS_KEY=minioadmin
MINIO__SECRET_KEY=minioadmin
MINIO__BUCKET=mlops-files
MINIO__REGION=us-east-1
MINIO__SECURE=false
MINIO__PUBLIC_ENDPOINT=http://localhost:9000  # External URL for presigned URLs
MINIO__RETRY_ATTEMPTS=3
MINIO__RETRY_BACKOFF=0.5
MINIO__PRESIGN_EXPIRY=3600

##API POSTGRESQL CONFIG
PG__USER=postgres
PG__PASSWORD=your-postgres-password-here
PG__HOST=postgres
PG__PORT=5432
PG__DB=main

# --- ML TRAINING ---
# Enable heavy training with pandas/sklearn (Linux CI recommended)
ENABLE_REAL_TRAINING=false
MAX_MODEL_ARTIFACTS=5
MAX_CSV_UPLOAD_BYTES=10485760
MIN_CSV_DATA_ROWS=2
MAX_EMPTY_RATIO=0.5

# --- TPOT (AutoML) ---
# TPOT-specific runtime configuration. Values can be a string name for a search
# space (e.g. 'linear' or 'graph') or a JSON/dict string for legacy config dicts.
ENABLE_AUTOML=false
TPOT_PARALLEL_MODE=local        # local|distributed
TPOT__CONFIG_DICT='linear'      # or 'graph', or use tpot.config.get_search_space('regressors')
TPOT__GENERATIONS=40
TPOT__POPULATION_SIZE=64
TPOT__TIME_LEFT=600             # minutes for the entire TPOT run
TPOT__PER_RUN_LIMIT=60          # seconds per pipeline evaluation
TPOT__METRIC=accuracy
TPOT__CV_FOLDS=5
TPOT__N_JOBS=1
TPOT__MEMORY_LIMIT_MB=3072
TPOT__DASK_SCHEDULER_FILE=/var/run/tpot/scheduler.json

# --- DATASET TTL CLEANUP ---
DATASET_TTL_DAYS=0
DATASET_TTL_CHECK_INTERVAL_SEC=3600
DATASET_TTL_BATCH_LIMIT=500

# --- MONITORING ---
PROMETHEUS__ENABLED=true
PROMETHEUS__METRICS_PATH=/metrics
PROMETHEUS__METRIC_NAMESPACE=mlops
PROMETHEUS__METRIC_SUBSYSTEM=backend
PROMETHEUS__LATENCY_BUCKETS=[0.005,0.01,0.025,0.05,0.1,0.25,0.5,1,2,5,10]
PROMETHEUS__INSTRUMENT_INPROGRESS=true
PROMETHEUS_PORT=9090
GRAFANA_PORT=3001
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin
