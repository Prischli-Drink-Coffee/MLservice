# План полного рефакторинга фронтенда (дизайн и оформление)

## 1. Контекст и цель
- Текущий интерфейс построен на темной палитре с яркими свечениями, но отсутствует консистентный дизайн-язык: разные страницы используют собственные градиенты, отступы и визуальные маркеры.
- Скриншоты, полученные из продакшена, показывают рассинхрон между лендингом, рабочими консолями (Datasets/Training/Artifacts/Metrics/Profile) и информационными страницами (About).
- Цель плана — описать все визуальные/композиционные проблемы и пошагово сформировать рефакторинг, который выровняет UI над единой дизайн-системой без изменений бизнес-логики.

## 2. Проблемные зоны (только дизайн, верстка и отображение)

### 2.1 Глобальный хедер и навигация
1. **Неравномерные отступы**: активная вкладка подсвечивается синей точкой, но расстояния между пунктами меню различаются (см. `Главная/Датасеты/Обучение`). Нужна сетка по 24px и единый hover/active state.
2. **CTA «Профиль» и «Выход» смешаны**: кнопки выглядят как отдельные капсулы разных размеров и цветов, создают визуальный шум и отвлекают от основного навигационного паттерна.
3. **Нечитабельность на градиентах**: логотип и текст располагаются на полупрозрачном фоне, который пересекается с огненными подсветками разделов и делает заголовок «Forge / ML Console» плохо читаемым.

### 2.2 Hero и лендинговые карточки
1. **Избыточные тени/глоу**: карточки «Forge Platform» и «Возможности платформы» имеют многослойные блики, которые подчеркивают «квадратность» контейнера и заглушают контент (кнопки теряются).
2. **Несогласованные высоты**: левый hero и правый блок статистики имеют разную высоту, поэтому baseline CTA и метрик «прыгает».
3. **Нагромождение текста**: блок преимуществ использует многострочные описания без вертикальных отступов (12px вместо 20px), что снижает читабельность на малых экранах.

### 2.3 Каталоги (Datasets / Training / Artifacts / Metrics)
1. **Карточки сливающихся градиентов**: верхние сводные блоки используют насыщенные синевато-фиолетовые градиенты поверх темного фона, поэтому их границы почти не видны.
2. **Статистика = статичный текст**: «Всего загружено / После фильтра / Активные загрузки» оформлены как лейблы без акцентов, хотя это ключевые метрики; цифры не масштабируются и не выравниваются по baseline.
3. **Полоса поиска**: инпуты в DatasetSearchBar и ArtifactsSearchBar не согласованы по высоте и фокусу, placeholder серый и малоконтрастный.
4. **Секции требований/истории**: подсекции разделяются тонкими линиями, но внутренние карточки не имеют отступов от краев контейнера — из-за этого текст «прилипает» к границе.
5. **Пустые состояния**: блоки «Нет датасетов», «Запусков отсутствуют», «Артефактов пока нет» выглядят как системные уведомления без визуальной иерархии, хотя это важные подсказки пользователю.

### 2.4 Профиль
1. **Несогласованный алерт**: предупреждение «Квота почти исчерпана» использует коричневый градиент, выбивающийся из брендовой палитры.
2. **Табличный блок данных**: поля профиля (компания, роль, id) выровнены по двум колонкам, но отступы между группами разные (18px vs 32px), а заголовки не имеют единого стиля.
3. **CRM-карточки**: блок «Поддержка и документы» визуально вторичен (плоский фон), но содержит CTA; его нужно привести к уровню остальных карточек.

### 2.5 About/Info
1. **Незаполненное пространство**: текстовые параграфы занимают узкую колонку по центру, вокруг огромные пустоты, нет фоновых паттернов или визуальных маркеров.
2. **Карточки команды**: аватарки-инициалы и подписи (город, контакты) не выровнены, разные размеры шрифта и кнопок «В поисках работы».
3. **Футер технологического стека**: теги технологий внизу страницы — серые однообразные бейджи; отсутствует hover, padding минимальный, что делает блок «приклеенным» к футеру.

### 2.6 Общие проблемы
1. **Нет явной сетки**: страницы используют разные максимальные ширины (hero ~1120px, каталоги ~960px, профиль >1200px).
2. **Размеры шрифтов**: некоторые заголовки подстраиваются под содержание (ручные `fontSize`), другие тянут токены; из-за этого переносы строк появляются случайно.
3. **Несогласованные CTA**: Primary/Secondary кнопки иногда используют градиенты, иногда — серые заливки. Размеры `md`/`lg` визуально не различаются.
4. **Иконография**: в статус-блоках используются разные наборы (Chakra icons, кастомные svg, иконки с текстом), нет единого размера/цвета.

## 3. Стратегия полного рефакторинга

### Этап 0. Подготовка
1. [x] Сформировать обновлённый дизайн-кит (Figma или mdx) на основе существующих токенов, определить:
   - цветовую систему (фон, градиенты, бордеры, тени);
   - типографику (Title/Subtitle/Body/Footnote);
   - сетку (`Container` maxWidth, spacing scale, breakpoints);
   - состояния для CTA, бейджей, инпутов, пустых состояний.
2. [x] Зафиксировать спецификацию в `docs/design.md` + `frontend_full_refactor_plan.md` (этот файл).

### Этап 1. Глобальные оболочки
1. [x] **Header**:
   - Единая высота (72px), прозрачный градиент, hover/active через `layoutId`-капсулу.
   - Действия разделены: для гостей `Войти/Регистрация`, для пользователей — аватар с меню (профиль/выход).
2. [x] **Footer**:
   - Фирменный градиент, равные иконки социальных сетей.
   - Информация распределена по трём колонкам: бренд, контакты, документы.
3. [x] **Layouts**:
   - `PublicLayout` теперь использует `maxW="6xl"` и единые горизонтальные/вертикальные отступы.
   - `ProtectedLayout` фиксирован к 6xl-ширине, секция контента имеет стабильные `px/py`, фоновые слои совпадают.

### Этап 2. Лендинг
1. **Hero**:
   - перестроить сетку на 12 колонок: слева текст, справа статблок + health status.
   - CTA в две строки (primary gradient + secondary outline).
2. **Преимущества/Слайдер**:
   - карточки = простые панели с мягким свечением, без «длинных» теней;
   - заголовки/описания использовать типографику Title/Body из темы;
   - добавить индикаторы прогресса (dots) с hover-состоянием.
3. **Подвал лендинга**:
   - оформить контакты и стек технологий в виде ленты бейджей с градиентным контуром.

### Этап 3. Рабочие консолии
1. **Сводные блоки (Datasets/Training/Artifacts/Metrics/Profile)**:
   - общий компонент `SummaryPanel` с конфигурируемыми карточками (label, number, badge, tooltip).
   - цифры отображать через `Stat`/`Chakra Heading`, baseline выровнен.
2. **Поисковые блоки**:
   - унифицировать высоту/иконки, добавить `focus-visible`.
   - placeholder — полутоновый текст с подсказкой/примером.
3. **Секции контента**:
   - использовать `Section` компонент с заголовком, описанием, action slot.
   - выровнять внутренние карточки (Guidelines, Launch, History) по сетке 24px.
4. **Empty/Error states**:
   - создать `EmptyPanel` с иллюстрацией/иконкой, коротким заголовком, CTA.
   - ошибки = `ErrorAlert` с градиентным border + повторное действие.

### Этап 4. Профиль и Info
1. **Profile**:
   - карточка пользователя (статус, роль, контакты) + editable fields в виде разделенных секций.
   - квоты и поддержка оформить одинаковыми карточками с четким CTA.
   - использовать `Timeline` с точками и линиями вместо списков.
2. **About/Info**:
   - добавить hero с коротким манифестом и фото/иллюстрацией.
   - секция команды = адаптивная сетка (3/2/1 карточки), аватар, должность, контакты.
   - контакты/технологии — акцентные бейджи с hover и иконками соцсетей.

### Этап 5. Компоненты и токены
1. **Theme overrides**:
   - расширить тему (Button, Input, Tabs, Menu, Tooltip, Stat, Card).
   - избавить компоненты от прямых импортов токенов (`colors.background.darkPrimary`).
2. **UI библиотека**:
   - собрать «атомы» (Button, Tag, Badge, Stat), «молекулы» (SummaryPanel, SectionHeader, SearchBar), «организмы» (Hero, CatalogSection, ProfileOverview).
3. **Анимации**:
   - оставить лишь лёгкие micro-interactions (scale 1.02, opacity);
   - подключить `prefers-reduced-motion` по умолчанию для всех декоративных эффектов.

### Этап 6. Наблюдаемость и QA
1. Внедрить визуальные снапшоты (Chromatic / Loki / Happo) для ключевых блоков.
2. Обновить `docs/frontend_structure_migration_plan.md` и `design.md` после каждого этапа.
3. Согласовать критерии приёмки (доступность по WCAG AA, адаптивность ≥1024px, единые токены).

## 4. План реализации (ориентировочно 4 спринта)

| Спринт | Основной фокус | Ключевые артефакты |
| --- | --- | --- |
| 1 | Theme & Layouts | Новые токены, Header/Footer, Section контейнеры, документация |
| 2 | Лендинг | Hero, статистика, преимущества, CTA, обновлённый Info/Footer |
| 3 | Рабочие консолии | SummaryPanel, SearchBar, Dataset/Training/Artifacts/Metrics/Profile |
| 4 | Полировка и QA | Empty/Error states, A11y, визуальные снапшоты, актуализация docs |

## 5. Критерии готовности
1. Все страницы используют общие контейнеры, spacing и тему Chakra (без кастомных inline градиентов).
2. Навигация/CTA/карточки выглядят одинаково на всех страницах, активное состояние → капсула/underline, а не точка.
3. Пустые состояния и ошибки оформлены стандартизованно, всегда содержат CTA.
4. Визуальные тесты (скриншоты) проходят без регрессий, базовые сценарии (десктоп ≥ 1280px, ноутбук 1024px) адаптивны.
5. Документация в `docs/` обновлена и отражает реальную структуру компонентов и стилевые правила.

---
**Ответственный**: фронтенд-команда MLservice
**Последнее обновление**: 25.11.2025
**Влияние**: улучшение UX, ускорение поддержки, снижение времени на дизайн-согласования.
